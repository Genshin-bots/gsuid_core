# âš™ï¸[GenshinUID](https://github.com/KimigaiiWuyi/GenshinUID) Core 0.9.1

[![Code style: ruff](https://img.shields.io/badge/code%20style-ruff-7C3AED.svg)](https://github.com/astral-sh/ruff)
[![pre-commit.ci status](https://results.pre-commit.ci/badge/github/Genshin-bots/gsuid-core/master.svg)](https://results.pre-commit.ci/latest/github/Genshin-bots/gsuid-core/master)

[KimigaiiWuyi/GenshinUID](https://github.com/KimigaiiWuyi/GenshinUID) çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå¹³å°æ— å…³ï¼Œæ”¯æŒ HTTP/WS å½¢å¼è°ƒç”¨ï¼Œä¾¿äºç§»æ¤åˆ°å…¶ä»–å¹³å°ä»¥åŠæ¡†æ¶ã€‚

**ğŸ’– ä¸€å¥—ä¸šåŠ¡é€»è¾‘ï¼Œå¤šä¸ªå¹³å°æ”¯æŒï¼**

**ğŸ‰ [è¯¦ç»†æ–‡æ¡£](https://docs.sayu-bot.com)** ( [å¿«é€Ÿå¼€å§‹(å®‰è£…)](https://docs.sayu-bot.com/Started/InstallCore.html) | [é“¾æ¥ Bot](https://docs.sayu-bot.com/LinkBots/AdapterList.html) | [æ’ä»¶å¸‚åœº](https://docs.sayu-bot.com/InstallPlugins/PluginsList.html) )

## ä¼˜ç‚¹&ç‰¹è‰²

- ğŸ”€ **å¼‚æ­¥ä¼˜å…ˆ**ï¼šå¼‚æ­¥å¤„ç†~~å¤§é‡~~æ¶ˆæ¯æµï¼Œä¸ä¼šé˜»å¡ä»»åŠ¡è¿è¡Œ
- ğŸ”§ **æ˜“äºå¼€å‘**ï¼šå³ä½¿å®Œå…¨æ²¡æœ‰æ¥è§¦è¿‡ Pythonï¼Œä¹Ÿèƒ½åœ¨ä¸€å°æ—¶å†…è¿…é€Ÿä¸Šæ‰‹ ğŸ‘‰ [æ’ä»¶ç¼–å†™æŒ‡å—](https://docs.sayu-bot.com/CodePlugins/CookBook.html)
- â™» **çƒ­é‡è½½**ï¼šä¿®æ”¹æ’ä»¶é…ç½®&å®‰è£…æ’ä»¶&æ›´æ–°æ’ä»¶ï¼Œæ— éœ€é‡å¯ä¹Ÿèƒ½ç›´æ¥åº”ç”¨
- **ğŸŒ [ç½‘é¡µæ§åˆ¶å°](https://docs.sayu-bot.com/Advance/WebConsole.html)**ï¼šé›†æˆç½‘é¡µæ§åˆ¶å°ï¼Œå¯ä»¥é€šè¿‡ WEB ç›´æ¥æ“ä½œ**æ’ä»¶æ•°æ®åº“/é…ç½®æ–‡ä»¶/æ£€ç´¢æ—¥å¿—/æƒé™æ§åˆ¶/æ•°æ®ç»Ÿè®¡/æ‰¹é‡å‘é€** ç­‰è¶…å¤šæ“ä½œ
- ğŸ“„ **é«˜åº¦ç»Ÿä¸€**ï¼šç»Ÿä¸€**æ‰€æœ‰æ’ä»¶**çš„[æ’ä»¶å‰ç¼€](https://docs.sayu-bot.com/CodePlugins/PluginsPrefix.html)/[é…ç½®ç®¡ç†](https://docs.sayu-bot.com/CodePlugins/PluginsConfig.html)/[å¸®åŠ©å›¾ç”Ÿæˆ](https://docs.sayu-bot.com/CodePlugins/PluginsHelp.html)/æƒé™æ§åˆ¶/[æ•°æ®åº“å†™å…¥](https://docs.sayu-bot.com/CodePlugins/PluginsDataBase.html)/[è®¢é˜…æ¶ˆæ¯](https://docs.sayu-bot.com/CodePlugins/Subscribe.html)ï¼Œæ‰€æœ‰æ’ä»¶ç¼–å†™å¸¸è§æ–¹æ³•ä¸€åº”ä¿±å…¨ï¼Œæ’ä»¶ä½œè€…å¯é€šè¿‡ç®€å•çš„**ç»§æ‰¿é‡å†™**å®ç°**é«˜åº¦ç»Ÿä¸€**çš„é€»è¾‘
- ğŸ’» **å¤šå…ƒé€‚é…**ï¼šå€ŸåŠ©ä¸Šæ¸¸ Bot (NoneBot2 / Koishi / YunzaiBot) é€‚é…ï¼Œæ”¯æŒ QQ/QQ é¢‘é“/å¾®ä¿¡/Tg/Discord/é£ä¹¦/KOOK/DODO/OneBot v11(v12)ç­‰å¤šä¸ªå¹³å°ï¼Œåšåˆ°**ä¸€å¥—ä¸šåŠ¡é€»è¾‘ï¼Œå¤šä¸ªå¹³å°æ”¯æŒ**ï¼
- ğŸš€ **ä½œä¸ºæ’ä»¶**ï¼šè¯¥é¡¹ç›®**ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨**ï¼Œä½œä¸º**ä¸Šæ¸¸ Bot (NoneBot2 / Koishi / YunzaiBot)** çš„æ’ä»¶ä½¿ç”¨ï¼Œæ— éœ€è¿ç§»åŸæœ¬ Botï¼Œä¿ç•™ä¹‹å‰å…¨éƒ¨çš„åŠŸèƒ½ï¼Œä¾¿äºå……åˆ†æ‰©å±•
- ğŸ›  **å†…ç½®å‘½ä»¤**ï¼šå€ŸåŠ©å†…ç½®å‘½ä»¤ï¼Œè½»æ¾å®Œæˆ**é‡å¯/çŠ¶æ€/å®‰è£…æ’ä»¶/æ›´æ–°æ’ä»¶/æ›´æ–°ä¾èµ–**ç­‰æ“ä½œ
- ğŸ“ **å¸®åŠ©ç³»ç»Ÿ**ï¼šé€šè¿‡ç»Ÿä¸€é€‚é…ï¼Œå¯æŒ‰ç…§ä¸åŒ**æƒé™è¾“å‡º**ä¸åŒå¸®åŠ©ï¼Œå¹¶æ”¯æŒæ’ä»¶çš„**äºŒçº§èœå•æ³¨å†Œ**è‡³ä¸»å¸®åŠ©ç›®å½•ï¼Œå¹¶æ”¯æŒåœ¨å¸®åŠ©ç•Œé¢ä½¿ç”¨ä¸åŒçš„**è‡ªå®šä¹‰å‰ç¼€**

<details><summary>ä¸»èœå•å¸®åŠ©ç¤ºä¾‹</summary><p>
<a><img src="https://s2.loli.net/2025/02/07/glxaJyS6325zvbG.jpg"></a>
</p></details>

## æ„Ÿè°¢

- æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”
- [çˆ±å‘ç”µ](https://afdian.com/a/KimigaiiWuyi)
- [GPL-3.0 License](https://github.com/Genshin-bots/gsuid_core/blob/master/LICENSE) Â©[@KimigaiiWuyi](https://github.com/KimigaiiWuyi)

---

> [!IMPORTANT]
>
> ä»¥ä¸‹å†…å®¹æœªç»éªŒè¯ã€‚

## ä½¿ç”¨ Docker éƒ¨ç½²

ç›®å‰æä¾›ä¸¤ç§ Docker éƒ¨ç½²æ¨¡å¼

### æ¨¡å¼ä¸€ï¼šæŒ‚è½½æ¨¡å¼ (Mount Mode) - æ¨è

**ç‰¹ç‚¹**ï¼šæŒ‚è½½æœ¬åœ°ä»£ç åˆ°å®¹å™¨ï¼Œä¿®æ”¹å³ç”Ÿæ•ˆã€‚

1. **æ‹‰å–ä»£ç **

```shell
# æ–¹æ³•ä¸€ï¼šä» GitHub æ‹‰å–
git clone https://github.com/Genshin-bots/gsuid_core.git

# æ–¹æ³•äºŒï¼šä» cnb.cool æ‹‰å–ï¼ˆå›½å†…é•œåƒæ›´å¿«ï¼‰
git clone https://cnb.cool/gscore-mirror/gsuid_core.git

cd gsuid_core
```

2. åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

```shell
cp .env.example .env
```

> ğŸ’¡ å¦‚éœ€è‡ªå®šä¹‰é…ç½®ï¼Œè¯·ç¼–è¾‘ .env æ–‡ä»¶å¹¶å–æ¶ˆæ³¨é‡Šç›¸åº”é…ç½®

3. **å¯åŠ¨æœåŠ¡**

```shell
docker-compose up -d --build
```

4. **ç®¡ç†**
   - æœåŠ¡è¿è¡Œåœ¨ç«¯å£ `8765`ã€‚
   - å¯åŠ¨åå¯é€šè¿‡ `localhost:8765/genshinuid` è¿›å…¥æ ¸å¿ƒçš„åå°ç®¡ç†ç•Œé¢

---

### æ¨¡å¼äºŒï¼šå…¨é‡æ¨¡å¼ (Bundle Mode)

**ç‰¹ç‚¹**ï¼šæ— éœ€ä¸‹è½½æºç ï¼Œç›´æ¥è¿è¡Œå…¨é‡é•œåƒï¼ˆåŒ…å«ç¯å¢ƒ+ä»£ç +ä¾èµ–ï¼‰ã€‚

1. **è·å–é…ç½®æ–‡ä»¶**
   åªéœ€ä¸‹è½½ [docker-compose.bundle.yml](./docker-compose.bundle.yml) æ–‡ä»¶ã€‚

2. åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

```shell
cp .env.example .env
```

2. **å¯åŠ¨æœåŠ¡**

   **æ–¹å¼ Aï¼šDocker Compose (æ¨è)**

   ```shell
   docker-compose -f docker-compose.bundle.yml up -d
   ```

   **æ–¹å¼ Bï¼šDocker Run**

   ```shell
   docker run -d \
     --name gsuid_core \
     --restart always \
     -p 8765:8765 \
     -v /opt/gscore_data:/gsuid_core/data \
     -v /opt/gscore_plugins:/gsuid_core/gsuid_core/plugins \
     -v gsuid_core_venv:/venv \
     docker.cnb.cool/gscore-mirror/gsuid_core:latest
   ```

   _(ä¼šè‡ªåŠ¨æ‹‰å–å…¨é‡é•œåƒ)_

3. **æ•°æ®ç®¡ç†**

   - æ•°æ®æŒä¹…åŒ–åœ¨ `/opt/gscore_data` ç›®å½•ã€‚
   - è‡ªå®šä¹‰æ’ä»¶å¯æ”¾åœ¨ `/opt/gscore_plugins` ç›®å½•ã€‚

4. **ç®¡ç†**
   - æœåŠ¡è¿è¡Œåœ¨ç«¯å£ `8765`ã€‚
   - å¯åŠ¨åå¯é€šè¿‡ `localhost:8765/genshinuid` è¿›å…¥æ ¸å¿ƒçš„åå°ç®¡ç†ç•Œé¢

---

### Playwright æ”¯æŒ (æˆªå›¾åŠŸèƒ½)

ç›®å‰æ‰€æœ‰ Docker é•œåƒ **é»˜è®¤å‡å·²åŒ…å« Playwright åŠ Chromium æµè§ˆå™¨ç¯å¢ƒ**ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œå¼€ç®±å³ç”¨ã€‚

---

### é«˜çº§æ“ä½œæŒ‡å—

#### 1. ç½‘ç»œä»£ç†é…ç½®

_(æ³¨æ„ï¼šè¯·ç¡®ä¿ä»£ç†è½¯ä»¶å¼€å¯äº† "å…è®¸å±€åŸŸç½‘è¿æ¥/LAN" æ¨¡å¼)_

**å®¹å™¨å†…çš„å…¨å±€ä»£ç†ï¼ˆä¸åŒ…æ‹¬ Git ä»£ç†ï¼‰**
åœ¨ `.env` ä¸­æ·»åŠ ï¼š

```yaml
GSCORE_HTTP_PROXY=http://host.docker.internal:7890
GSCORE_HTTPS_PROXY=http://host.docker.internal:7890
```

**å®¹å™¨å†…è®¾ç½® Git ä»£ç†**

```shell
docker exec -it gsuid_core git config --global http.proxy http://host.docker.internal:7890
```

#### 2. å®‰è£…é¢å¤–çš„ Python åŒ…

å¦‚æœä½ å®‰è£…äº†ç¬¬ä¸‰æ–¹æ’ä»¶éœ€è¦é¢å¤–ä¾èµ–ï¼š

```shell
docker exec -it gsuid_core uv pip install <åŒ…å>
```

#### 3. ç¯å¢ƒé‡ç½® (è§£å†³ä¾èµ–å†²çª)

å¦‚æœæ›´æ–°é•œåƒåæŠ¥é”™ï¼ˆå¦‚ç¼ºå°‘ä¾èµ–ï¼‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤**å½»åº•æ¸…ç†**æ—§ç¯å¢ƒï¼š

**æŒ‚è½½æ¨¡å¼ï¼š**

```shell
docker-compose down -v
docker-compose up -d --build
```

**å…¨é‡æ¨¡å¼ï¼š**

```shell
# docker-compose æ¨¡å¼
docker-compose -f docker-compose.bundle.yml down -v
docker-compose -f docker-compose.bundle.yml up -d

# docker run æ¨¡å¼
docker volume rm gsuid_core_venv
```

_(è­¦å‘Šï¼šè¿™å°†åˆ é™¤ `venv-data` å·ï¼Œæ‰€æœ‰æ‰‹åŠ¨å®‰è£…çš„åŒ…éœ€è¦é‡æ–°å®‰è£…ï¼Œä½† `data` æ•°æ®ä¸ä¼šä¸¢å¤±)_
